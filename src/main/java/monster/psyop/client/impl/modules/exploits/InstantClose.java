package monster.psyop.client.impl.modules.exploits;

import monster.psyop.client.framework.events.EventListener;
import monster.psyop.client.framework.modules.Categories;
import monster.psyop.client.framework.modules.Module;
import monster.psyop.client.impl.events.game.OnPacket;
import monster.psyop.client.utility.PacketUtils;
import net.minecraft.network.protocol.game.ClientboundOpenScreenPacket;
import net.minecraft.network.protocol.game.ServerboundContainerClosePacket;

public class InstantClose extends Module {

    public InstantClose() {
        super(Categories.EXPLOITS, "instant-close", "Instantly closes a screen.");
    }

    @EventListener
    public void onPacket(OnPacket.Received event) {
        if (event.packet() instanceof ClientboundOpenScreenPacket) {
            PacketUtils.send(new ServerboundContainerClosePacket(-1));
            event.cancel();
        }
    }
}
