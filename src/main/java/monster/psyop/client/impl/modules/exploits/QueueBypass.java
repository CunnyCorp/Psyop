package monster.psyop.client.impl.modules.exploits;

import monster.psyop.client.framework.events.EventListener;
import monster.psyop.client.framework.modules.Categories;
import monster.psyop.client.framework.modules.Module;
import monster.psyop.client.impl.events.game.OnTick;
import monster.psyop.client.utility.PacketUtils;
import monster.psyop.client.utility.StringUtils;
import net.minecraft.network.protocol.game.ServerboundEditBookPacket;

import java.util.ArrayList;
import java.util.Objects;
import java.util.Optional;

public class QueueBypass extends Module {
    public QueueBypass() {
        super(Categories.EXPLOITS, "queue-bypass", "Bypass Constantiam's Queue server automatically.");
    }

    @EventListener
    public void onTick(OnTick.Pre event) {
        assert MC.player != null;
        if (Objects.requireNonNull(MC.getCurrentServer()).ip.contains("constantiam.net")) {
            PacketUtils.send(new ServerboundEditBookPacket(0, new ArrayList<>(), Optional.of(StringUtils.randomText(128, true))));
        }
    }
}
