package monster.psyop.client.impl.modules.exploits;

import monster.psyop.client.framework.events.EventListener;
import monster.psyop.client.framework.modules.Categories;
import monster.psyop.client.framework.modules.Module;
import monster.psyop.client.framework.modules.settings.types.IntSetting;
import monster.psyop.client.impl.events.game.OnTick;
import monster.psyop.client.utility.PacketUtils;
import net.minecraft.core.BlockPos;
import net.minecraft.core.Direction;
import net.minecraft.network.protocol.game.ServerboundPlayerActionPacket;

public class FastSwap extends Module {
    public final IntSetting rate =
            new IntSetting.Builder()
                    .name("rate")
                    .description("How many packets to send.")
                    .defaultTo(15)
                    .range(1, 20)
                    .addTo(coreGroup);

    public FastSwap() {
        super(Categories.EXPLOITS, "fast-swap", "Quickly swaps held item with offhand.");
    }

    @EventListener
    public void onTick(OnTick.Pre event) {
        if (MC.player == null) {
            return;
        }

        for (int i = 0; i < rate.get(); i++) {
            PacketUtils.send(new ServerboundPlayerActionPacket(ServerboundPlayerActionPacket.Action.SWAP_ITEM_WITH_OFFHAND, BlockPos.ZERO, Direction.DOWN));
        }
    }
}
